@model EasyPro.Models.DCompany

<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="form-element-list mg-t-30">
            <div class="cmp-tb-hd">
                <h2>Edit</h2>
            </div>
            <hr />
            <form asp-action="Edit">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" asp-for="Id" />
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Name" class="control-label"></label>
                            <input asp-for="Name" class="form-control" readonly />
                            <span asp-validation-for="Name" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Adress" class="control-label"></label>
                            <input asp-for="Adress" class="form-control" />
                            <span asp-validation-for="Adress" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Town" class="control-label"></label>
                            <input asp-for="Town" class="form-control" />
                            <span asp-validation-for="Town" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Country" class="control-label"></label>
                            <input asp-for="Country" value="Kenya" class="form-control" readonly />
                            <span asp-validation-for="Country" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label class="control-label">County</label>
                            <select asp-for="Province" id="county" class="form-control" asp-items="@ViewBag.counties" required></select>
                            <span asp-validation-for="Province" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label class="control-label">Sub-County</label>
                            <select asp-for="District" id="sub-county" class="form-control"  asp-items="@ViewBag.SubCountyName" required disabled ></select>
                            <span asp-validation-for="District" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label class="control-label">Ward</label>
                            <select asp-for="Division" id="ward"  class="form-control" asp-items="@ViewBag.WardSubCounty" required disabled ></select>
                            <span asp-validation-for="Division" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Location" class="control-label"></label>
                            <select asp-for="Location" id="location" class="form-control" asp-items="@ViewBag.locations"></select>
                            <span asp-validation-for="Location" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="PhoneNo" class="control-label"></label>
                            <input asp-for="PhoneNo" class="form-control" />
                            <span asp-validation-for="PhoneNo" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Email" class="control-label"></label>
                            <input asp-for="Email" class="form-control" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Website" class="control-label"></label>
                            <input asp-for="Website" class="form-control" />
                            <span asp-validation-for="Website" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Fiscal" class="control-label"></label>
                            <input asp-for="Fiscal" class="form-control" />
                            <span asp-validation-for="Fiscal" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="Motto" class="control-label"></label>
                            <input asp-for="Motto" class="form-control" />
                            <span asp-validation-for="Motto" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="SupStatementNote" class="control-label"></label>
                            <input asp-for="SupStatementNote" class="form-control" />
                            <span asp-validation-for="SupStatementNote" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                        <button type="submit" class="btn btn-success">Save</button>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                        <a asp-action="Index" class="btn btn-primary">Back to List</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script type="text/javascript">
    $(function () {
    let subcounties = @Html.Raw(Json.Serialize(ViewBag.subCounties));
    let wards = @Html.Raw(Json.Serialize(ViewBag.wards));
    let locations = @Html.Raw(Json.Serialize(ViewBag.locations));
    debugger
    $('#county').on('change', function () {
    $('#sub-county').empty();
    $('#sub-county').append($('<option>').val('').text(''))
        $('#sub-county').prop('disabled', false);
        $('#ward').prop('disabled', true);
        let county = $("#county").val();
        let sub_counties = subcounties.filter(p => p.County.trim() === county.trim());

        $.each(sub_counties, function () {
        $('#sub-county').append($("<option />").val(this.Name).text(this.Name));
    });
    });

    $('#sub-county').on('change', function () {
    $('#ward').empty();
    $('#ward').prop('disabled', false);
    let subCounty = $("#sub-county").val();
    let curr_wards = wards.filter(p => p.SubCounty.trim() === subCounty.trim());

    $.each(curr_wards, function () {
    $('#ward').append($("<option />").val(this.Name).text(this.Name));
    });
    });
    });
    </script>
}
